# Only load interface if available
if {[file exists "interface/stlink.cfg"]} {
    source [find interface/stlink.cfg]
} else {
    puts "Warning: ST-Link interface config not found"
}

# Set adapter speed only if adapter is present
# This avoids errors when nothing is connected
catch {
    adapter speed 1000
    transport select swd
}

# Increase working area (optional, safe even if adapter missing)
set WORKAREASIZE 0x20000

# Only load target if available
if {[file exists "target/stm32f4x.cfg"]} {
    source [find target/stm32f4x.cfg]
} else {
    puts "Warning: Target config not found"
}

# Reset config (safe without hardware)
reset_config none

